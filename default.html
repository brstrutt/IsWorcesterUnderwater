<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>Is Worcester Underwater?</title>
    <link rel="stylesheet" href="/style.css"/>
    <link rel="icon" href="icon.png" />
  </head>
  <body>
    <?php
      include_once($_SERVER['DOCUMENT_ROOT'] . "/FloodLevels.php");

      $barbourneRiverLevel = GetBarbourneRiverLevel();
      $diglisRiverLevel = GetDiglisRiverlLevel();

      if(IsWorcesterUnderwater())
      {
        $isWorcesterUnderwater = "Yes";
        $disclaimer = "Worcester may in fact NOT be underwater";
      }
      else if(IsBarbourneFlooding() || IsDiglisFlooding())
      {
        $isWorcesterUnderwater = "Maybe";
        $disclaimer = "Worcester may be partially underwater";
      }
      else
      {
        $isWorcesterUnderwater = "No";
        $disclaimer = "Worcester may in fact be underwater";
      }
    ?>
    <svg class="background_image" viewBox="0 0 100% 100%" xmlns="https://www.w3.org/TR/SVG/" version="2.0">
      <defs>
        <clipPath id="my-clip">
          <title>My Clip Path</title>
          <desc>an svg rectangle using a circle as the clipping target and animated with SMIL</desc>
          <rect x="0" y="0" width="200" height="600">
          <animate attributeType="XML"
                   attributeName="x"
                   from=“-200"
                   to=“400"
                   dur="5s"
                   repeatCount="indefinite"/>
          </rect>
        </clipPath>
      </defs>
      <rect x="0" y="50%" width="100%" height="50%" fill="blue" />
      <circle clip-path="url(#my-clip)" width="200" height="200" cx="0" r="50" cy="0" fill="white" />
    </svg>
    <div class="content_overlay">
      <header>
        <p>
          <a href="https://check-for-flooding.service.gov.uk/station/2092" title="Barbourne River Level Info" target="_blank" rel="noopener noreferrer">Barbourne</a>:
          <?php echo $barbourneRiverLevel . "m/" . $barbourneFloodingLevel . "m"; ?>
        </p>
        <p>
          <a href="https://check-for-flooding.service.gov.uk/station/2039" title="Diglis River Level Info" target="_blank" rel="noopener noreferrer">Diglis</a>:
          <?php echo $diglisRiverLevel . "m/" . $diglisFloodingLevel . "m"; ?>
        </p>
        <p class="FloodAlertsLink Push"><a href="https://check-for-flooding.service.gov.uk/location?q=worcester" title="Worcester Flood Alerts" target="_blank" rel="noopener noreferrer">Live Flood Alerts</a></p>
      </header>
      <main>
        <div class="ResultsContent">
          <h1><?php echo $isWorcesterUnderwater; ?>*</h1>
          <p>* Disclaimer: <?php echo $disclaimer; ?></p>
        </div>
      </main>
      <footer>
        <p>This uses Environment Agency flood and river level data from the real-time data API (Beta)</p>
        <div class="Push"><p>Icons made by <a href="https://www.flaticon.com/authors/catkuro" title="catkuro">catkuro</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></p></div>
      </footer>
    </div>
  </body>
</html>
