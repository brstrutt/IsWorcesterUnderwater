<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <title>Is Worcester Underwater?</title>
    <link rel="stylesheet" href="/style.css"/>
    <link rel="icon" href="icon.png" />
  </head>
  <body>
    <?php
      include_once($_SERVER['DOCUMENT_ROOT'] . "/FloodLevels.php");

      $barbourneRiverLevel = GetBarbourneRiverLevel();
      $diglisRiverLevel = GetDiglisRiverlLevel();

      if(IsWorcesterUnderwater())
      {
        $isWorcesterUnderwater = "Yes";
        $disclaimer = "Worcester may in fact NOT be underwater";
      }
      else if(IsBarbourneFlooding() || IsDiglisFlooding())
      {
        $isWorcesterUnderwater = "Maybe";
        $disclaimer = "Worcester may be partially underwater";
      }
      else
      {
        $isWorcesterUnderwater = "No";
        $disclaimer = "Worcester may in fact be underwater";
      }
    ?>
    <svg class="background_image" viewBox="0 0 100% 100%" xmlns="https://www.w3.org/TR/SVG/" version="2.0">
      <defs>
        <clipPath id="WaterLevel">
          <title>Water level Clip Path</title>
          <desc>an svg rectangle to clip out anything above the water level</desc>
          <rect x="0" y="20%" width="100%" height="100%" />
        </clipPath>
        <clipPath id="NoText">
          <text class="ResultsContent" x="50%" y="55%">NO</text>
        </clipPath>
        <clipPath id="YesText" clip-path="url(#WaterLevel)">
          <text class="ResultsContent" x="50%" y="55%">YES</text>
        </clipPath>
      </defs>
      <rect clip-path="url(#NoText)" x="0" y="0" width="100%" height="100%" fill="black" />
      <rect clip-path="url(#WaterLevel)" x="0" y="0" width="100%" height="100%" fill="blue" />
      <rect clip-path="url(#YesText)" x="0" y="0" width="100%" height="100%" fill="white" />
    </svg>
    <div class="content_overlay">
      <header>
        <p>
          <a href="https://check-for-flooding.service.gov.uk/station/2092" title="Barbourne River Level Info" target="_blank" rel="noopener noreferrer">Barbourne</a>:
          <?php echo $barbourneRiverLevel . "m/" . $barbourneFloodingLevel . "m"; ?>
        </p>
        <p>
          <a href="https://check-for-flooding.service.gov.uk/station/2039" title="Diglis River Level Info" target="_blank" rel="noopener noreferrer">Diglis</a>:
          <?php echo $diglisRiverLevel . "m/" . $diglisFloodingLevel . "m"; ?>
        </p>
        <p class="FloodAlertsLink Push"><a href="https://check-for-flooding.service.gov.uk/location?q=worcester" title="Worcester Flood Alerts" target="_blank" rel="noopener noreferrer">Live Flood Alerts</a></p>
      </header>
      <main>
      </main>
      <footer>
        <p>This uses Environment Agency flood and river level data from the real-time data API (Beta)</p>
        <div class="Push"><p>Icons made by <a href="https://www.flaticon.com/authors/catkuro" title="catkuro">catkuro</a> from <a href="https://www.flaticon.com/" title="Flaticon">www.flaticon.com</a></p></div>
      </footer>
    </div>
  </body>
</html>
